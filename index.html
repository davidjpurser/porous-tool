<!DOCTYPE html>
<html>
   <head>
      <meta charset="UTF-8">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <style>
         header {
         background-color: #5397CC;
         padding:10px 0;
         }	
         textarea {
         width: 100%;
         height: 200px;
         font-family : monospace
         }
         #output{
         color: black;
         height:300px;
         background-color: white;
         }
      </style>
      <title>Affine Programs Invariant Builder And Reachability Checker</title>
   </head>
   <body>
      <header>
         <div class="container text-center">
            <h2>Affine Programs Invariant Builder And Reachability Checker</h2>
         </div>
      </header>
      <div class="container">
         <main>
            <h3>Input Format</h3>
            On the first line write the start point, target and optionally whether you expect it to be reachable.
            If the start point is negative, the problem will be inverted so it is positive.
            <br>
            Supported targets are single numbers, or Z-linear sets, with {b+pZ} specified as b+p.
            <br>
            On subsequent lines, write the functions by writing the multiplier and the adder, i.e. <code>a b</code> means <code>f(x) = ax+b</code>. Do not include redundant functions.<br>
            On the line after the last function, optionally, write ENDS. Everything after ENDS will be ignored.<br>
            <code>startpoint target[+period] [True|False]<br>
            a b <br>
            ...<br>
            a b <br>
            [ENDS]
            </code>
            <br>
            <h3>Input area</h3>
            Examples:
            <button class="example btn btn-primary" data="1 0 False
1 -3
2 0">MU Puzzle</button>
            <button class="example btn btn-primary" data="1 9+3 False
1 -3
2 0">MU Puzzle with Z target</button>
            <button class="example btn btn-primary" data="2 32 True
2 0">Power 2 yes</button>
            <button class="example btn btn-primary" data="2 24 False
2 0">Power 2 no</button>
            <button class="example btn btn-primary" data="1 0 True
20 0
1 20
1 -20
-20 20
20 -20
-1 20">20's</button>
            <br>
            <textarea id="input"></textarea>
            <br>
            <button id="go" class="btn btn-success">
            Go
            </button>
            <br>
            <h3>Output area</h3>
            <textarea id="output" disabled="disabled"></textarea>
            <br>
            <br>
         </main>


      <hr>
     
      </div>
      <script type="text/javascript">
         $(document).ready(function(){
         
         	$('button.example').on('click',function(){
         		data = $(this).attr('data');
         		$('#input').val(data);
         		$('#go').click();
         	})
         
         	$('#go').on('click',function(){
               $('#output').val('computing...')
         		$.ajax({
         			url: '/about',
         			contentType: "application/json",
         	        dataType: "json",
         			type: 'post',
         			data: JSON.stringify({
         				val: $('#input').val()
         			}),
         			success:function(data){
         				// build = "functions: " +  data['output']['functions'] + "\n" ;
         				// build +=  "invariants: " + data['output']['inv']+ "\n" ;
         				// build +=  "reachability: " + data['output']['reach']+ "\n" ;
         				// build += "proof:\n" +  data['output']['proof']+ "\n" ;
         				$('#output').val(data['printed']);
         			},
                  error:function(){
                    $('#output').val('failed, try again'); 
                  }
         		});
         
         
         	});
         });
      </script>

   </body>
</html>

