<!DOCTYPE html>
<html>
   <head>
      <meta charset="UTF-8">
      <link rel="stylesheet" href="bootstrap.min.css">
      <script src="jquery.min.js"></script>
      <style>
         header {
         background-color: #5397CC;
         padding:10px 0;
         }	
         textarea {
         width: 100%;
         height: 140px;
         font-family : monospace
         }
         #output{
         color: black;
         height:300px;
         background-color: white;
         }
      </style>
      <title>POROUS: Invariant Builder And Reachability Checker for Affine Programs</title>
   </head>
   <body>
      <header class="mb-2">
         <div class="container text-center ">
            <h2>POROUS: Invariant Builder And Reachability Checker for Affine Programs</h2>
         </div>
      </header>
      <div class="container">
         <div class="row">
            <div class="col-md-7">
<h3>Input Format Explanation</h3>
            On the first line write the start point, target and optionally whether you expect it to be reachable.
            Supported targets are single numbers, or Z-linear sets, with {b+pZ} specified as b+p (note, b+-p is equivalent).
            <br>
            On subsequent lines, write the functions by writing the multiplier and the adder, i.e. <code>a b</code> means <code>f(x) = ax+b</code>. 
            <br>
            On the line after the last function, optionally, write ENDS. Everything after ENDS will be ignored, for example here we provide some explanation.<br>
            </div>
        
            <div class="col-md-5">
               <h3> Format</h3>
            <code>start target[+period] [True|False]<br>
            a b <br>
            ...<br>
            a b <br>
            [ENDS]
            </code>
         </div>
      </div>
         <main>
            <h3>Input area</h3>
            <div class="mb-1">
            Examples:
            <button class="example btn btn-primary" data="1 0 False
1 -3
2 0
ENDS
Hofstadter mu puzzle
">MU Puzzle</button>
            <button class="example btn btn-primary" data="1 9+3 False
1 -3
2 0
ENDS
Hofstadter mu puzzle with the target of any multiple of three">MU Puzzle with Z target</button>
            <button class="example btn btn-primary" data="2 32 True
2 0
ENDS
The reachability set of 2^n is not semi-linear. Here reachability is shown.
">Power 2 yes</button>
            <button class="example btn btn-primary" data="2 24 False
2 0
ENDS
The reachability set of 2^n is not semi-linear. Here non-reachability is shown">Power 2 no</button>
            <button class="example btn btn-primary" data="1 0 True
20 0
1 20
1 -20
-20 20
20 -20
-1 20">20's</button>
            <button class="example btn btn-primary" data="4 33 False
-1 23
ENDS
When the only function is an 'inverters' there is a finite number of reachable points
">One pure inverter</button>
            <button class="example btn btn-primary" data="4 33 False
-1 23
-1 8
ENDS
When there are multiple 'inverters' we can add new functions.
">Two pure inverters</button>
            <button class="example btn btn-primary" data="5 33 True
1 24
1 -4
ENDS
Functions in both directions leads to Z-linear sets.
">Opposing Reachable</button>
<button class="example btn btn-primary" data="5 545 False
4 23
-4 51
ENDS
Observe this creates a pair of symmetric infinite sets plus singleton points.
">All Growing</button>
<button class="example btn btn-primary" data="5 545 False
4 23
-1 23
ENDS
Observe the inverter makes the infinite set assymmetric. Differing by 23.
">Asymmetric</button>
<button class="example btn btn-primary" data="5 80 True
4 23
-1 23
1 23
">Grow/Count/Invert</button>
<button class="example btn btn-primary" data="1 1 True
2 0
">Trivially reachable</button>
<button class="example btn btn-primary" data="1 -2 False
2 0
">Growing negative target</button>
<button class="example btn btn-primary" data="1 6 True
1 2
0 4
">Multiple start</button>
   </div>
            <textarea id="input"></textarea>
            <br>
            <button id="go" class="btn btn-success">
            Go
            </button>
            <br>
            <h3>Output area</h3>
            <textarea id="output" disabled="disabled"></textarea>
            <br>
            <br>
         </main>


      <hr>  
      Tool implemented by <a href="http://www.davidpurser.net">David Purser</a>, for the paper <em>Porous Invariants</em> by 
      <a href="https://elefauch.github.io/" >Engel Lefaucheux</a>, 
      <a href="https://people.mpi-sws.org/~joel/" >JoÃ«l Ouaknine</a>, 
      <a href="http://www.davidpurser.net">David Purser</a> and
      <a href="http://www.cs.ox.ac.uk/people/james.worrell/"> James Worrell</a><br>
      <a href="https://github.com/davidjpurser/porous-tool">Code on GitHub</a>
      <hr>  
      <br>
     
      </div>
      <script type="text/javascript">
         $(document).ready(function(){
         
         	$('button.example').on('click',function(){
         		data = $(this).attr('data');
         		$('#input').val(data);
         		$('#go').click();
         	})
         
         	$('#go').on('click',function(){
               $('#output').val('computing...')
         		$.ajax({
         			url: '/invariant',
         			contentType: "application/json",
         	        dataType: "json",
         			type: 'post',
         			data: JSON.stringify({
         				val: $('#input').val()
         			}),
         			success:function(data){

         				$('#output').val(data['printed']);
         			},
                  error:function(){
                    $('#output').val('failed, try again'); 
                  }
         		});
         
         
         	});
         });
      </script>

   </body>
</html>

